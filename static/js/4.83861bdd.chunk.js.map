{"version":3,"sources":["components/Cart/Cart.module.css","components/Cart/CartItem.module.css","components/Cart/CartItem.js","components/Cart/Cart.js","components/UI/Modal.js","components/UI/Modal.module.css"],"names":["module","exports","cart_items","total","actions","button","checkout","cart-item","summary","price","qty","remove","CartItem","props","dispatch","useDispatch","id","name","itemPrice","concat","toFixed","react_default","a","createElement","react","className","classes","onClick","cartActions","removeAllItemFromCart","src","img","alt","width","height","removeItemFromCart","addItemToCart","Checkout","React","lazy","Promise","all","__webpack_require__","e","then","bind","Cart","_useState","useState","_useState2","Object","slicedToArray","isProceed","setIsProceed","_useState3","_useState4","isSubmitting","setIsSubmitting","_useState5","_useState6","didSubmit","setDidSubmit","cartItems","useSelector","state","cart","items","totalPrice","totalQty","authCtx","useContext","AuthContext","cartTotalPrice","hasItems","length","submitOrderHandler","_ref","asyncToGenerator","_regeneratorRuntime","mark","_callee","userData","wrap","_context","prev","next","fetch","localId","method","body","JSON","stringify","user","orderedItems","orderTotalPrice","orderTotalQty","clearCart","stop","_x","apply","this","arguments","cartItem","map","item","Cart_CartItem","key","cartModalContent","fallback","LoadingSpinner","isLoggedIn","react_router_dom","to","onClose","onConfirm","isSubmittingModalContent","didSubmitModalContent","Modal","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","react_dom__WEBPACK_IMPORTED_MODULE_1__","react_dom__WEBPACK_IMPORTED_MODULE_1___default","_Modal_module_css__WEBPACK_IMPORTED_MODULE_2__","_Modal_module_css__WEBPACK_IMPORTED_MODULE_2___default","Backdrop","backdrop","ModalOverlay","modal","copntent","children","portalElement","document","getElementById","ReactDOM","createPortal","slide-down"],"mappings":"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","file":"static/js/4.83861bdd.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"cart_items\":\"Cart_cart_items__2NVA9\",\"total\":\"Cart_total__36Tyb\",\"actions\":\"Cart_actions__2qrHl\",\"button\":\"Cart_button__2-SvG\",\"checkout\":\"Cart_checkout__Zyv1z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cart-item\":\"CartItem_cart-item__1ezKv\",\"summary\":\"CartItem_summary__3tEGF\",\"price\":\"CartItem_price__2HPu_\",\"total\":\"CartItem_total__kg6kC\",\"qty\":\"CartItem_qty__12baS\",\"remove\":\"CartItem_remove__3LjY6\",\"actions\":\"CartItem_actions__1Z91H\"};","import React, { Fragment } from \"react\";\r\nimport classes from \"./CartItem.module.css\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { cartActions } from \"../../Store/cart-slice\";\r\n\r\nconst CartItem = (props) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const { id, price, name } = props;\r\n\r\n  const cartItemAddHandler = () => {\r\n    dispatch(cartActions.addItemToCart({ id, price, name }));\r\n  };\r\n\r\n  const cartItemRemoveHandler = () => {\r\n    dispatch(cartActions.removeItemFromCart(id));\r\n  };\r\n\r\n  const removeCartItemHandler = () => {\r\n    dispatch(cartActions.removeAllItemFromCart(id));\r\n  };\r\n\r\n  const itemPrice = `$${props.price.toFixed(2)}`;\r\n\r\n  return (\r\n    <Fragment>\r\n      <button className={classes.remove} onClick={removeCartItemHandler}>\r\n        x\r\n      </button>\r\n      <li className={classes[\"cart-item\"]}>\r\n        <div>\r\n          <h2>{props.name}</h2>\r\n\r\n          <div className={classes.summary}>\r\n            <img src={props.img} alt=\"product\" width=\"70\" height=\"70\" />\r\n          </div>\r\n        </div>\r\n        <div className={classes.total}>\r\n          <span>\r\n            Price :<span className={classes.price}>{itemPrice}</span>\r\n          </span>\r\n          <span>\r\n            Qty :<span className={classes.qty}>x {props.qty}</span>\r\n          </span>\r\n        </div>\r\n        <div className={classes.actions}>\r\n          <button onClick={cartItemRemoveHandler}>âˆ’</button>\r\n          <button onClick={cartItemAddHandler}>+</button>\r\n        </div>\r\n      </li>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default CartItem;\r\n","import React, { Fragment, Suspense, useContext, useState } from \"react\";\r\nimport Modal from \"../UI/Modal\";\r\nimport classes from \"./Cart.module.css\";\r\nimport CartItem from \"./CartItem\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { cartActions } from \"../../Store/cart-slice\";\r\nimport LoadingSpinner from \"../UI/LoadingSpinner\";\r\nimport AuthContext from \"../../Store/auth-context\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst Checkout = React.lazy(() => import(\"./Checkout\"));\r\n\r\nconst Cart = (props) => {\r\n  const [isProceed, setIsProceed] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [didSubmit, setDidSubmit] = useState(false);\r\n\r\n  const cartItems = useSelector((state) => state.cart.items);\r\n  const totalPrice = useSelector((state) => state.cart.totalPrice);\r\n  const totalQty = useSelector((state) => state.cart.totalQty);\r\n\r\n  const authCtx = useContext(AuthContext);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const cartTotalPrice = `$${totalPrice.toFixed(2)}`;\r\n\r\n  const hasItems = cartItems.length > 0;\r\n\r\n  const ProceedHandler = () => {\r\n    setIsProceed(true);\r\n  };\r\n\r\n  const submitOrderHandler = async (userData) => {\r\n    setIsSubmitting(true);\r\n    await fetch(\r\n      `https://sl-rc-store-default-rtdb.asia-southeast1.firebasedatabase.app/orders/${authCtx.localId}.json`,\r\n      {\r\n        method: \"POST\",\r\n        body: JSON.stringify({\r\n          user: userData,\r\n          orderedItems: cartItems,\r\n          orderTotalPrice: totalPrice,\r\n          orderTotalQty: totalQty,\r\n        }),\r\n      }\r\n    );\r\n    dispatch(cartActions.clearCart());\r\n    setIsSubmitting(false);\r\n    setDidSubmit(true);\r\n  };\r\n\r\n  const cartItem = (\r\n    <ul>\r\n      {cartItems.map((item) => (\r\n        <CartItem\r\n          key={item.id}\r\n          id={item.id}\r\n          name={item.name}\r\n          img={item.img}\r\n          price={item.price}\r\n          qty={item.qty}\r\n        />\r\n      ))}\r\n    </ul>\r\n  );\r\n\r\n  const cartModalContent = (\r\n    <Suspense\r\n      fallback={\r\n        <div className=\"centered\">\r\n          <LoadingSpinner />\r\n        </div>\r\n      }\r\n    >\r\n      <div className={classes.cart_items}>{!isProceed && cartItem}</div>\r\n      {!isProceed && (\r\n        <Fragment>\r\n          <div className={classes.total}>\r\n            <span>Total Amount:</span>\r\n            <span>{cartTotalPrice}</span>\r\n          </div>\r\n          <div className={classes.actions}>\r\n            {!authCtx.isLoggedIn&&<Link to='/user' onClick={props.onClose}>Please Login to Proceed</Link>}\r\n            <button onClick={props.onClose}>Close</button>\r\n            {hasItems && authCtx.isLoggedIn && (\r\n              <button className={classes.button} onClick={ProceedHandler}>\r\n                Proceed to checkout\r\n              </button>\r\n            )}\r\n          </div>\r\n        </Fragment>\r\n      )}\r\n      {isProceed && (\r\n        <Checkout\r\n          onConfirm={submitOrderHandler}\r\n          className={classes.checkout}\r\n          onClose={props.onClose}\r\n        />\r\n      )}\r\n    </Suspense>\r\n  );\r\n\r\n  const isSubmittingModalContent = <p>Sending order data....</p>;\r\n\r\n  const didSubmitModalContent = (\r\n    <Fragment>\r\n      <p>\r\n        Successfully sent the order! <br /> Order will be ship soon\r\n        <br />\r\n        Thank you..!\r\n      </p>\r\n      <div className={classes.actions}>\r\n        <button className={classes[\"button--alt\"]} onClick={props.onClose}>\r\n          Close\r\n        </button>\r\n      </div>\r\n    </Fragment>\r\n  );\r\n\r\n  return (\r\n    <Modal onClose={props.onClose}>\r\n      {!isSubmitting && !didSubmit && cartModalContent}\r\n      {isSubmitting && isSubmittingModalContent}\r\n      {!isSubmitting && didSubmit && didSubmitModalContent}\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n","import React, { Fragment } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport classes from \"./Modal.module.css\";\r\n\r\nconst Backdrop = (props) => {\r\n  return <div className={classes.backdrop} onClick={props.onClose}></div>;\r\n};\r\n\r\nconst ModalOverlay = (props) => {\r\n  return (\r\n    <div className={classes.modal}>\r\n      <div className={classes.copntent}>{props.children}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst portalElement = document.getElementById(\"overlays\");\r\n\r\nconst Modal = (props) => {\r\n  return (\r\n    <Fragment>\r\n      {ReactDOM.createPortal(<Backdrop onClose={props.onClose}/>, portalElement)}\r\n      {ReactDOM.createPortal(\r\n        <ModalOverlay>{props.children}</ModalOverlay>,\r\n        portalElement\r\n      )}\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backdrop\":\"Modal_backdrop__3-ya5\",\"modal\":\"Modal_modal__1I_Zq\",\"slide-down\":\"Modal_slide-down__3vucw\"};"],"sourceRoot":""}