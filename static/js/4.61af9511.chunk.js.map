{"version":3,"sources":["components/Cart/CartItem.js","components/Cart/Cart.js","components/UI/Modal.js","components/UI/Modal.module.css","components/Cart/Cart.module.css","components/Cart/CartItem.module.css"],"names":["CartItem","props","dispatch","useDispatch","id","price","name","itemPrice","concat","toFixed","react_default","a","createElement","react","className","classes","remove","onClick","cartActions","removeAllItemFromCart","summary","src","img","alt","width","height","total","qty","actions","removeItemFromCart","addItemToCart","Checkout","React","lazy","Promise","all","__webpack_require__","e","then","bind","Cart","_useState","useState","_useState2","Object","slicedToArray","isProceed","setIsProceed","_useState3","_useState4","isSubmitting","setIsSubmitting","_useState5","_useState6","didSubmit","setDidSubmit","cartItems","useSelector","state","cart","items","totalPrice","totalQty","authCtx","useContext","AuthContext","cartTotalPrice","hasItems","length","submitOrderHandler","_ref","asyncToGenerator","_regeneratorRuntime","mark","_callee","userData","wrap","_context","prev","next","fetch","localStorage","localId","method","body","JSON","stringify","user","orderedItems","orderTotalPrice","orderTotalQty","clearCart","stop","_x","apply","this","arguments","cartItem","map","item","Cart_CartItem","key","cartModalContent","fallback","LoadingSpinner","cart_items","isLoggedIn","react_router_dom","to","onClose","button","onConfirm","checkout","isSubmittingModalContent","didSubmitModalContent","Modal","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","react_dom__WEBPACK_IMPORTED_MODULE_1__","react_dom__WEBPACK_IMPORTED_MODULE_1___default","_Modal_module_css__WEBPACK_IMPORTED_MODULE_2__","_Modal_module_css__WEBPACK_IMPORTED_MODULE_2___default","Backdrop","backdrop","ModalOverlay","modal","copntent","children","portalElement","document","getElementById","ReactDOM","createPortal","module","exports","slide-down","cart-item"],"mappings":"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","file":"static/js/4.61af9511.chunk.js","sourcesContent":["import React, { Fragment } from \"react\";\r\nimport classes from \"./CartItem.module.css\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { cartActions } from \"../../Store/cart-slice\";\r\n\r\nconst CartItem = (props) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const { id, price, name } = props;\r\n\r\n  const cartItemAddHandler = () => {\r\n    dispatch(cartActions.addItemToCart({ id, price, name }));\r\n  };\r\n\r\n  const cartItemRemoveHandler = () => {\r\n    dispatch(cartActions.removeItemFromCart(id));\r\n  };\r\n\r\n  const removeCartItemHandler = () => {\r\n    dispatch(cartActions.removeAllItemFromCart(id));\r\n  };\r\n\r\n  const itemPrice = `$${props.price.toFixed(2)}`;\r\n\r\n  return (\r\n    <Fragment>\r\n      <button className={classes.remove} onClick={removeCartItemHandler}>\r\n        x\r\n      </button>\r\n      <li className={classes[\"cart-item\"]}>\r\n        <div>\r\n          <h2>{props.name}</h2>\r\n\r\n          <div className={classes.summary}>\r\n            <img src={props.img} alt=\"product\" width=\"70\" height=\"70\" />\r\n          </div>\r\n        </div>\r\n        <div className={classes.total}>\r\n          <span>\r\n            Price :<span className={classes.price}>{itemPrice}</span>\r\n          </span>\r\n          <span>\r\n            Qty :<span className={classes.qty}>x {props.qty}</span>\r\n          </span>\r\n        </div>\r\n        <div className={classes.actions}>\r\n          <button onClick={cartItemRemoveHandler}>âˆ’</button>\r\n          <button onClick={cartItemAddHandler}>+</button>\r\n        </div>\r\n      </li>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default CartItem;\r\n","import React, { Fragment, Suspense, useContext, useState } from \"react\";\r\nimport Modal from \"../UI/Modal\";\r\nimport classes from \"./Cart.module.css\";\r\nimport CartItem from \"./CartItem\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { cartActions } from \"../../Store/cart-slice\";\r\nimport LoadingSpinner from \"../UI/LoadingSpinner\";\r\nimport AuthContext from \"../../Store/auth-context\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst Checkout = React.lazy(() => import(\"./Checkout\"));\r\n\r\nconst Cart = (props) => {\r\n  const [isProceed, setIsProceed] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [didSubmit, setDidSubmit] = useState(false);\r\n\r\n  const cartItems = useSelector((state) => state.cart.items);\r\n  const totalPrice = useSelector((state) => state.cart.totalPrice);\r\n  const totalQty = useSelector((state) => state.cart.totalQty);\r\n\r\n  const authCtx = useContext(AuthContext);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const cartTotalPrice = `$${totalPrice.toFixed(2)}`;\r\n\r\n  const hasItems = cartItems.length > 0;\r\n\r\n  const ProceedHandler = () => {\r\n    setIsProceed(true);\r\n  };\r\n\r\n  const submitOrderHandler = async (userData) => {\r\n    setIsSubmitting(true);\r\n    await fetch(\r\n      `https://sl-rc-store-default-rtdb.asia-southeast1.firebasedatabase.app/orders/${localStorage.localId}.json`,\r\n      {\r\n        method: \"POST\",\r\n        body: JSON.stringify({\r\n          user: userData,\r\n          orderedItems: cartItems,\r\n          orderTotalPrice: totalPrice,\r\n          orderTotalQty: totalQty,\r\n        }),\r\n      }\r\n    );\r\n    dispatch(cartActions.clearCart());\r\n    setIsSubmitting(false);\r\n    setDidSubmit(true);\r\n  };\r\n\r\n  const cartItem = (\r\n    <ul>\r\n      {cartItems.map((item) => (\r\n        <CartItem\r\n          key={item.id}\r\n          id={item.id}\r\n          name={item.name}\r\n          img={item.img}\r\n          price={item.price}\r\n          qty={item.qty}\r\n        />\r\n      ))}\r\n    </ul>\r\n  );\r\n\r\n  const cartModalContent = (\r\n    <Suspense\r\n      fallback={\r\n        <div className=\"centered\">\r\n          <LoadingSpinner />\r\n        </div>\r\n      }\r\n    >\r\n      <div className={classes.cart_items}>{!isProceed && cartItem}</div>\r\n      {!isProceed && (\r\n        <Fragment>\r\n          <div className={classes.total}>\r\n            <span>Total Amount:</span>\r\n            <span>{cartTotalPrice}</span>\r\n          </div>\r\n          <div className={classes.actions}>\r\n            {!authCtx.isLoggedIn&&<Link to='/user' onClick={props.onClose}>Please Login to Proceed</Link>}\r\n            <button onClick={props.onClose}>Close</button>\r\n            {hasItems && authCtx.isLoggedIn && (\r\n              <button className={classes.button} onClick={ProceedHandler}>\r\n                Proceed to checkout\r\n              </button>\r\n            )}\r\n          </div>\r\n        </Fragment>\r\n      )}\r\n      {isProceed && (\r\n        <Checkout\r\n          onConfirm={submitOrderHandler}\r\n          className={classes.checkout}\r\n          onClose={props.onClose}\r\n        />\r\n      )}\r\n    </Suspense>\r\n  );\r\n\r\n  const isSubmittingModalContent = <p>Sending order data....</p>;\r\n\r\n  const didSubmitModalContent = (\r\n    <Fragment>\r\n      <p>\r\n        Successfully sent the order! <br /> Order will be ship soon\r\n        <br />\r\n        Thank you..!\r\n      </p>\r\n      <div className={classes.actions}>\r\n        <button className={classes[\"button--alt\"]} onClick={props.onClose}>\r\n          Close\r\n        </button>\r\n      </div>\r\n    </Fragment>\r\n  );\r\n\r\n  return (\r\n    <Modal onClose={props.onClose}>\r\n      {!isSubmitting && !didSubmit && cartModalContent}\r\n      {isSubmitting && isSubmittingModalContent}\r\n      {!isSubmitting && didSubmit && didSubmitModalContent}\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n","import React, { Fragment } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport classes from \"./Modal.module.css\";\r\n\r\nconst Backdrop = (props) => {\r\n  return <div className={classes.backdrop} onClick={props.onClose}></div>;\r\n};\r\n\r\nconst ModalOverlay = (props) => {\r\n  return (\r\n    <div className={classes.modal}>\r\n      <div className={classes.copntent}>{props.children}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst portalElement = document.getElementById(\"overlays\");\r\n\r\nconst Modal = (props) => {\r\n  return (\r\n    <Fragment>\r\n      {ReactDOM.createPortal(<Backdrop onClose={props.onClose}/>, portalElement)}\r\n      {ReactDOM.createPortal(\r\n        <ModalOverlay>{props.children}</ModalOverlay>,\r\n        portalElement\r\n      )}\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backdrop\":\"Modal_backdrop__3-ya5\",\"modal\":\"Modal_modal__1I_Zq\",\"slide-down\":\"Modal_slide-down__3vucw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cart_items\":\"Cart_cart_items__2NVA9\",\"total\":\"Cart_total__36Tyb\",\"actions\":\"Cart_actions__2qrHl\",\"button\":\"Cart_button__2-SvG\",\"checkout\":\"Cart_checkout__Zyv1z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cart-item\":\"CartItem_cart-item__1ezKv\",\"summary\":\"CartItem_summary__3tEGF\",\"price\":\"CartItem_price__2HPu_\",\"total\":\"CartItem_total__kg6kC\",\"qty\":\"CartItem_qty__12baS\",\"remove\":\"CartItem_remove__3LjY6\",\"actions\":\"CartItem_actions__1Z91H\"};"],"sourceRoot":""}